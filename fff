pipeline {
     agent any
     
     environment {
        NEXT_VERSION = nextVersion(writeVersion: false)
    }
    
    stages {
        stage('Update Version') { 
  
           steps {
                          
             echo "next version = ${NEXT_VERSION}"  
             bat 'node version-updater.js %NEXT_VERSION%'
           
             bat '''
             git config --global user.email "alialmubarak.ite@gmail.com"
             git config --global user.name "alimob7ark"
             git config --global url."https://alimob7ark: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@github.com".insteadOf "https://github.com"
             git add .  
             git commit -m "Update Version" 
             git push -u origin main 
             '''

             
              
             
           }
        }
    }
}
